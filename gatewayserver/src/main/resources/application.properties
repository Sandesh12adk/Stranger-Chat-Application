spring.application.name=gatewayserver
spring.config.import=configserver:http://configserver:8888

# Serve static content
spring.web.resources.static-locations=classpath:/static/

# Route root to dashboard
spring.cloud.gateway.routes[0].id=root-dashboard
spring.cloud.gateway.routes[0].uri=https://www.strangerblink.fun
spring.cloud.gateway.routes[0].predicates[0]=Path=/
spring.cloud.gateway.routes[0].filters[0]=SetPath=/dashboard.html

# Route APIs to user service
spring.cloud.gateway.routes[1].id=user-api
spring.cloud.gateway.routes[1].uri=lb://user
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/**
# In-memory rate limiting
spring.cloud.gateway.discovery.locator.filters[0].name=RequestRateLimiter
spring.cloud.gateway.discovery.locator.filters[0].args.key-resolver=#{@ipKeyResolver}
spring.cloud.gateway.discovery.locator.filters[0].args.redis-rate-limiter.replenishRate=10
spring.cloud.gateway.discovery.locator.filters[0].args.redis-rate-limiter.burstCapacity=20
# COMPLETELY OPEN CORS CONFIGURATION
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=*
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600
# Gateway CORS - Use allowedOriginPatterns instead of allowedOrigins
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origin-patterns=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600
